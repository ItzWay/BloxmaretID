<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/bloxmaret.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/bloxmaret.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/bloxmaret.png">
  <link rel="stylesheet" href="style.css">
  <title>Bloxmaret ID</title>
</head>
<body ondragstart="return false" onselectstart="return false">

  <label class="recaptcha-box" onclick="showModal()">
    <input type="checkbox" id="fake-captcha"/>
    Saya bukan robot
    <div class="recaptcha-logo">
      <img src="/img/bloxmaret.png" alt="Bloxmaret ID">
      <div>Bloxmaret ID</div>
      <div>Privasi Â· Persyaratan</div>
    </div>
  </label>

  <div class="modal" id="captchaModal">
    <div class="modal-content">
      <h3>Jawab pertanyaan berikut:</h3>
      <p id="question">Berapa hasil dari 1 + 2?</p>
      <input type="number" id="answer" placeholder="Jawaban kamu..." />
      <br>
      <button onclick="verify()">Kirim</button>

      <div role="alert" class="alert" id="alert-box">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span id="alert-message">Jawaban salah. Coba lagi.</span>
      </div>
    </div>
  </div>

  <script>
    let num1, num2, correct;

    function generateQuestion(smooth = false) {
      num1 = Math.floor(Math.random() * 10);
      num2 = Math.floor(Math.random() * 10);
      correct = num1 + num2;

      const question = document.getElementById("question");
      if (smooth) {
        question.classList.add("fade-out");
        setTimeout(() => {
          question.innerText = `Berapa hasil dari ${num1} + ${num2}?`;
          question.classList.remove("fade-out");
        }, 300);
      } else {
        question.innerText = `Berapa hasil dari ${num1} + ${num2}?`;
      }

      document.getElementById("answer").value = "";
    }

    generateQuestion();

    function showModal() {
      document.getElementById("captchaModal").style.display = "flex";
    }

    function verify() {
      const userAnswer = parseInt(document.getElementById("answer").value);
      const alertBox = document.getElementById("alert-box");
      const alertMessage = document.getElementById("alert-message");

      if (userAnswer === correct) {
        alertBox.style.display = "none";
        document.getElementById("captchaModal").style.display = "none";
        document.getElementById("fake-captcha").checked = true;

        window.location.href = "/main/bloxmaret.html";
      } else {
        alertMessage.textContent = "Jawaban salah. Coba lagi.";
        alertBox.style.display = "flex";

        setTimeout(() => {
          alertBox.style.display = "none";
          generateQuestion(true);
        }, 1000);
      }
    };
  </script>
  <!-- <script>
        document.onkeydown = function(e) {
            if (e.keyCode === 123 ||
                (e.ctrlKey && e.shiftKey && ['I', 'J', 'C', 'E'].includes(String.fromCharCode(e.keyCode))) || 
                (e.ctrlKey && e.keyCode === 'U'.charCodeAt(0)) ||
                (e.ctrlKey && e.keyCode === 'S'.charCodeAt(0))
            ) {
                e.preventDefault();
                return false;
            }
        };
    
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
  </script>   -->
</body>
</html>
